---
layout: post
title:  "Week 5: A merging week"
categories: GSoC '17
published: true
---

Coming to this week, it's mostly been getting a huge chunk of my work ready to be merged and finally getting it merged.

In the last meeting my mentor, Micheal, told me about the plans for a new version of CWL Specification ``v1.1`` to be realesed by the end of the July and resultanly, cwltool will be modified heavily to incorporate new features of the spec.
Thus, it was important to start getting everything merged. I started out by merging my two separate branches ``mypy updates`` and ``unicode_`` and pulling upstream changes and fixing merge conflicts. Micheal was quick enough to respond and we finally got my schema_salad PR merged mid-week. Happy to share that we have started using Python 3 compatible schema_salad in cwltool now.

As discussed in previous blog post, ``unicode_literals`` have been helpful so far but they were breaking mypy badly. The problem mainly emerges from the fact that many typeshed stubs only accept `str` when ascii-only `unicode` values also work at runtime with Python 2.7 stdlib. This causes a lot of problems with code using `unicode_literals`, since generally most literals will have `unicode` as their type due to the nature of this import.  

I had previously reported the errors realted to it here and very recently mentioned them again. This time around Guido himself replied:

<img src="/blog/assets/guido_comment.png" alt="guido_comment" align="center" />

I discussed the same with Micheal, and we decided on dropping ``unicode_literals``.
<img src="/blog/assets/michael_reply.png" alt="michael_reply" align="center" />

This meant changing mypy annotations again and fixing up things. Luckily, it didn't take much time and I finally got my PR for cwltool ready by the weekend. We plan on getting it merged early this week. This marks alot of compatibilty code merged and getting used in production. I am targeting on getting apache avro issues resolved soon which is the only major bottleneck that remains on the road to Python 3.
